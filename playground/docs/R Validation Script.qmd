---
title: "RCBMS-One Codebase"
subtitle: "R scripts for validation and tabulation of CBMS data"
author: "Bhas Abdulsamad"
format: revealjs
editor: visual
---

# Presentation outline

--- 

## Outline

- Introduction
- The `rcbms` package
- The `rcbms-one` codebase
- The RCBMS App
- How to contribute


# Introduction

---

# The `rcbms` package

---

# The `rcbms-one` codebase

---

## Cloning the project using Git

- Make sure you have installed the following in your computer: Git, R, and RStudio
- Open RStudio and the go to File > New Project...
- Select Version Control > Git
- In the Repository URL, paste this: [https://github.com/yng-me/rcbms-one.git](https://github.com/yng-me/rcbms-one.git)
- Then click Create Project.


## Project structure


## Script configuration: Global

```yaml
cbms_round: '2024'
version:
  app: 3.0.0
  script: 0.0.1
  package: 0.1.0
read_from_parquet: yes
reload_references: no
working_directory: './playground'
complete_cases: yes
harmonize_variable: yes
input_data: hp
execute_mode: yes
mode:
  type: validation
  edit: 1
  source: 2
  stage: dev
  options:
    detailed_output: no
    include_household_info: no
    add_uuid: no
    save_as_excel: no
    save_as_json: no
aggregation:
  level: 1
  areas: all
verbose: yes
references:
  area_name: seNZ_CbplwpBrOQiUwIJ2koZONLLFHSicaGFWEKzbrE
  valueset: eR-sYyLaHMRPRVOkOECTy-iiPQJ-QC8ailyXtNPAA6A
  validation: PV5NwM-W3jp8lHmCkE0E84JzeObPYD116bU-xKVVuaY
  tabulation: jfXp-Hao1J4Dkis6E2G_-FZ_mUyA3vGEk0B4aFZvTAE
  data_dictionary: MU-qx-Va8DpdoZQ5M2I2fexcU4fm-NJAuzr6Os54dMQ
```


## Script configuration: Project

```yaml
2024:
  reference_period: ~
  add_length: 1
  bp:
    file_format: csv
  hp:
    file_format: txt
    summary_record: cover_page
    roster_record: section_a_f
    unfiltered_records:
      - cover_page
      - interview_record
    variable:
      line_number: line_no
      result_of_visit: result_of_final_visit
      age: a05_age
      sex: a03_sex
2022:
  reference_period: 2022-06-30
  add_length: 0
  bp:
    file_format: xlsx
  hp:
    file_format: txt
    summary_record: summary_of_visit
    roster_record: section_a_to_e
    unfiltered_records:
      - summary_of_visit
      - geo_info
    variable:
      line_number: lno
      result_of_visit: result_of_visit
      age: a07_age
      sex: a05_sex
2021:
  reference_period: 2021-10-01
  add_length: 0
  bp:
    file_format: csv
  hp:
    file_format: txt
    summary_record: interview_record
    roster_record: section_a_to_e
    unfiltered_records:
      - interview_record
    variable:
      line_number: lineno
      age: a07_age
      sex: a05_sex
```


## The `index.R` script

```{r, eval=FALSE}
library(dplyr)
library(tidyr)
library(stringr)

rcbms::execute_script(.config_file = "configs/global.yml")
```


# The RCBMS App
